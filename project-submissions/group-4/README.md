# CS431: Security Guard Design Document - Project 4

## Team Members:
- Aditya Mehta
- Anura Mantri
- Daksh Jain
- Harshit
- Pavani Tirunagari
- Reddybathuni Venkat
- Soumya Malviya

## Overview:
This project focuses on implementing a secure logging system to monitor the entry and exit of guests and employees on the IIT Gandhinagar campus. The system is designed to safeguard the privacy and integrity of logs, even in the presence of potential adversaries. Two core programs, `logappend` and `logread`, are developed to manage and query the logs efficiently.

## Design:
The project is implemented in C++ and uses MongoDB as the database to store logs.
We also used Docker to containerize the server and client applications to make it machine-independent.
The system operates with two key components:

1. **Client(s):**
    - Clients interact with the system to append logs to the database.
    - Clients validate the format of instruction arguments locally before sending the logs to the server.
   
2. **Server:**
    - The server maintains a local connection to the database.
    - It receives logs from clients and stores them in the database.
    - The server is also responsible for reading logs from the database and returning them to clients.
    - The server verifies the correctness of the instructions and updates the logs in the database (if valid).

## Security Features Implemented:
1. Enforced all constraints mentioned in the [Logappend](https://github.com/IITGN-CS431/problems/blob/main/securityguard/LOGAPPEND.md) and [Logread](https://github.com/IITGN-CS431/problems/blob/main/securityguard/LOGREAD.md) specifications except ```-I``` command.
2. Implemented HTTPS communication between the server and clients, secured with a TLS layer, effectively providing HTTPS over the network.
3. Utilized timeouts to mitigate the risk of Denial of Service (DoS) attacks.
4. Integrated certificates to authenticate the server.

## Assumptions:
1. The connection between the database and server is secure, with no potential for malicious activity.
2. The server is trusted, and no malicious activities are expected from it.
3. The client is trusted, and no malicious activities are expected from it.
4. The root certificate ```rootCA.crt``` and root private key ```rootCA.key``` have been generated by a self-signed Certificate Authority (CA), and their initial secure exchange between the client and server has already been completed without any tampering. The secure exchange of these credentials is assumed to be outside the scope of the current security model, and any issues related to this initial exchange will not be considered security bugs within the system.
5. Once a person has been assigned and logged using a particular entry, all future log entries for that person will be recorded through the same log. The system does not account for reassigning the person or changing logs across different entry points.
6. As MongoDB is used in our system, the requirement for using periods and slashes in log filenames does not align with its structure. MongoDB organizes data into collections within databases, rather than following a traditional file system with paths and filenames. Given this structure, it enforces specific naming rules that restrict certain characters, including periods, especially in collection names. Consequently, implementing file path references with slashes and periods is not feasible within MongoDB. In our setup, each log file is treated as a separate database, with log entries recorded as collections within these databases. Therefore, this adaptation to MongoDBâ€™s structure means that the requirement for path-like references will not be counted as a bug but rather as an inherent adjustment to the database's design.

## Requirements:
- Docker must be installed on the machine to build and run the client and server.

## Build Instructions:
In the build directory, you can find the bash files for server and client. Run the following commands to build the server and client images respectively:

Before running any commands, ensure that Docker is installed and running on your system.

To build and set up the server:

```bash
cd build
./run_server.sh
```

To build and set up the client:
```bash
cd build
./run_client.sh --server-ip <YOUR_SERVER_IP>
```
Make sure to replace ```<YOUR_SERVER_IP>``` with the actual IP address of the server you are connecting to.

## Error Handling
If you encounter errors such as "client" or "server" containers already exist, follow these steps to remove the existing containers before rerunning them.

To Fix This:

Remove the existing container:
```
docker rm client
docker rm server
```
For Linux Users: If you see a permission error, prepend ```sudo``` to the above commands.
